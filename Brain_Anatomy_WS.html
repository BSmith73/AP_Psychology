<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brain Regions & Functions Worksheet</title>
    <!-- Tailwind CSS CDN for quick styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #334155;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: bold;
            color: #1e293b;
        }

        .header p {
            margin-top: 0.5rem;
            color: #475569;
        }

        .word-bank-section {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .word-bank-title {
            font-weight: bold;
            font-size: 1.25rem;
            color: #1e293b;
        }

        .word-bank-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .word-bank-item {
            background-color: #dbeafe; /* Light blue */
            color: #1e40af; /* Dark blue */
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: grab;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .word-bank-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .word-bank-item.dragging {
            opacity: 0.6;
            cursor: grabbing;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 0.5rem;
        }

        thead th {
            background-color: #e0f2fe; /* Lighter blue for table header */
            color: #1e293b;
            font-weight: bold;
            padding: 1rem;
            text-align: left;
            border-radius: 0.5rem;
        }

        tbody tr {
            background-color: #f8fafc;
            border-radius: 0.5rem;
        }

        tbody td {
            padding: 1rem;
            border-radius: 0.5rem;
            vertical-align: top;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .brain-region {
            font-weight: 600;
            color: #1e293b;
        }

        .drop-target {
            min-height: 4rem;
            border: 2px dashed #94a3b8;
            border-radius: 0.5rem;
            transition: border-color 0.2s;
            display: flex;
            align-items: center;
            padding: 0.5rem;
        }

        .drop-target.drag-over {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }

        .drop-target .word-bank-item {
            margin: 0;
        }

        .button-section {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .button {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: bold;
            transition: background-color 0.2s, transform 0.2s;
        }

        .check-button {
            background-color: #22c55e; /* Green */
            color: white;
        }

        .check-button:hover {
            background-color: #16a34a;
            transform: translateY(-2px);
        }

        .reset-button {
            background-color: #ef4444; /* Red */
            color: white;
        }

        .reset-button:hover {
            background-color: #dc2626;
            transform: translateY(-2px);
        }

        .feedback-message {
            margin-top: 1rem;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* Modal styling */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            position: relative;
        }

        .modal-close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #94a3b8;
        }

        #modal-options-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            gap: 0.75rem;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        }

        #modal-options-list li {
            background-color: #e2e8f0;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #modal-options-list li:hover {
            background-color: #cbd5e1;
        }
        
        /* New styling for the home button */
        .home-button {
            position: absolute;
            top: 1.5rem;
            left: 1.5rem;
            background-color: #475569;
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: bold;
            font-size: 0.9rem;
            text-decoration: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: background-color 0.2s, transform 0.2s;
        }

        .home-button:hover {
            background-color: #334155;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .home-button {
                top: 1rem;
                left: 1rem;
                padding: 0.6rem 0.8rem;
            }
        }
    </style>
</head>
<body>
<a href="index.html" class="home-button">
    &lt; Back to Home
</a>
<div class="container">
    <div class="header">
        <h1>Brain Regions & Functions Worksheet</h1>
        <p>Directions: Match each brain region with its primary function and a corresponding scenario that would occur if that area were damaged. Drag and drop the answers from the word banks below or click on a dashed box to choose from a list of options.</p>
    </div>

    <div class="word-bank-section">
        <div>
            <div class="word-bank-title">Primary Functions</div>
            <ul id="functions-bank" class="word-bank-list"></ul>
        </div>
        <div>
            <div class="word-bank-title">Effects of Damage</div>
            <ul id="damage-bank" class="word-bank-list"></ul>
        </div>
    </div>

    <table>
        <thead>
        <tr>
            <th>Brain Region</th>
            <th>Primary Function</th>
            <th>Effects of Damage</th>
        </tr>
        </thead>
        <tbody id="worksheet-body"></tbody>
    </table>

    <div class="button-section">
        <button id="check-btn" class="button check-button">Check Answers</button>
        <button id="reset-btn" class="button reset-button">Reset Worksheet</button>
    </div>

    <div id="feedback-message" class="feedback-message"></div>
</div>

<!-- Modal for Click-to-Select -->
<div id="selection-modal-overlay" class="modal-overlay">
    <div class="modal-content">
        <span class="modal-close-btn">&times;</span>
        <ul id="modal-options-list"></ul>
    </div>
</div>

<script>
    const worksheetData = [
        {
            region: "Medulla",
            function: "Controls basic life-sustaining functions like breathing and heart rate.",
            damaged: "Damaged: Someone's heart rate and breathing become dangerously irregular."
        },
        {
            region: "Reticular Formation",
            function: "Regulates arousal, attention, and sleep-wake cycles.",
            damaged: "Damaged: A person is awake but their consciousness is impaired, and they may fall into a coma."
        },
        {
            region: "Cerebellum",
            function: "Coordinates voluntary movement, balance, and procedural memory.",
            damaged: "Damaged: An individual has no sense of balance and clumsy, uncoordinated movements."
        },
        {
            region: "Thalamus",
            function: "Relays all sensory information (except smell) to the cerebral cortex.",
            damaged: "Damaged: Difficulty relaying sensory information, leading to sensory confusion."
        },
        {
            region: "Hypothalamus",
            function: "Regulates homeostatic functions like body temperature, hunger, and thirst.",
            damaged: "Damaged: A person feels constantly hungry and struggles with weight gain."
        },
        {
            region: "Amygdala",
            function: "Processes emotions, especially fear and aggression.",
            damaged: "Damaged: A person is unable to control their emotional responses, leading to outbursts of rage."
        },
        {
            region: "Hippocampus",
            function: "Consolidates new memories into long-term memory.",
            damaged: "Damaged: Cannot form new memories after a concussion."
        },
        {
            region: "Corpus Callosum",
            function: "Connects the two cerebral hemispheres, allowing for communication.",
            damaged: "Damaged: Difficulty transferring information between the two brain hemispheres, leading to issues like being unable to verbally name an object seen in the left visual field."
        },
        {
            region: "Frontal Lobe",
            function: "Initiates voluntary movements and is involved in personality, judgment, and emotional regulation.",
            damaged: "Damaged: Significant changes in personality, impulsivity, or difficulty initiating complex voluntary movements."
        },
        {
            region: "Parietal Lobe",
            function: "Processed sensory information from various senses, spatial awareness, and navigation.",
            damaged: "Damaged: Difficulty with spatial awareness, navigation, or recognizing objects by touch."
        },
        {
            region: "Occipital Lobe",
            function: "Processes visual information.",
            damaged: "Damaged: A person's vision is completely gone."
        },
        {
            region: "Temporal Lobe",
            function: "Processes auditory information.",
            damaged: "Damaged: A person can no longer hear sounds."
        },
        {
            region: "Broca’s Area",
            function: "Directs speech production.",
            damaged: "Damaged: A person can understand what is said to them but is unable to form words to reply."
        },
        {
            region: "Wernicke’s Area",
            function: "Processes language comprehension.",
            damaged: "Damaged: An individual has difficulty understanding spoken language."
        },
        {
            region: "Prefrontal Cortex",
            function: "Involved in higher-order thinking, planning, and executive functions.",
            damaged: "Damaged: An individual struggles to make rational decisions or plan for the future."
        },
        {
            region: "Motor Cortex",
            function: "Controls voluntary muscle movements.",
            damaged: "Damaged: A person has reflexes, but can't wave"
        },
        {
            region: "Somatosensory Cortex",
            function: "Processes touch, temperature, and pain sensations.",
            damaged: "Damaged: A person experiences a complete lack of touch sensation."
        },
        {
            region: "Left Hemisphere",
            function: "Specializes in language processing, logical reasoning, and analytical thought.",
            damaged: "Damaged: Difficulty with speech, reading, or mathematical calculations."
        },
        {
            region: "Right Hemisphere",
            function: "Specializes in spatial reasoning, facial recognition, and processing non-verbal cues and emotions.",
            damaged: "Damaged: Difficulty recognizing faces or navigating familiar spaces, or neglect of one side of the body."
        }
    ];

    let functionsBank, damageBank, activeDropTarget;
    const SCROLL_ZONE_SIZE = 50; // Pixels from top/bottom to start scrolling
    const SCROLL_SPEED = 20; // Pixels to scroll per drag event

    document.addEventListener('DOMContentLoaded', () => {
        const checkBtn = document.getElementById('check-btn');
        const resetBtn = document.getElementById('reset-btn');
        const feedbackEl = document.getElementById('feedback-message');
        const modalOverlay = document.getElementById('selection-modal-overlay');
        const modalCloseBtn = document.querySelector('.modal-close-btn');

        functionsBank = document.getElementById('functions-bank');
        damageBank = document.getElementById('damage-bank');

        initializeWorksheet();
        addEventListeners();
    });

    function initializeWorksheet() {
        // Clear any existing content
        const worksheetBody = document.getElementById('worksheet-body');
        worksheetBody.innerHTML = '';
        functionsBank.innerHTML = '';
        damageBank.innerHTML = '';

        // Shuffle the functions and damaged scenarios for the word banks
        const shuffledFunctions = shuffleArray(worksheetData.map(d => d.function));
        const shuffledDamages = shuffleArray(worksheetData.map(d => d.damaged));

        // Populate the word banks
        shuffledFunctions.forEach(text => {
            functionsBank.appendChild(createWordBankItem(text, 'function'));
        });
        shuffledDamages.forEach(text => {
            damageBank.appendChild(createWordBankItem(text, 'damage'));
        });

        // Populate the worksheet table with brain regions and empty drop targets
        worksheetData.forEach((data, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td class="brain-region">${data.region}</td>
                <td><div class="drop-target" data-row-index="${index}" data-column-type="function"></div></td>
                <td><div class="drop-target" data-row-index="${index}" data-column-type="damage"></div></td>
            `;
            document.getElementById('worksheet-body').appendChild(row);
        });
    }

    function createWordBankItem(text, type) {
        const li = document.createElement('li');
        li.textContent = text;
        li.classList.add('word-bank-item');
        li.setAttribute('draggable', 'true');
        li.dataset.type = type;
        li.dataset.originalText = text;
        return li;
    }

    function addEventListeners() {
        // Drag and Drop listeners
        document.addEventListener('dragstart', (e) => {
            if (e.target.classList.contains('word-bank-item')) {
                e.target.classList.add('dragging');
                e.dataTransfer.setData('text/plain', e.target.dataset.originalText);
                e.dataTransfer.setData('text/item-type', e.target.dataset.type);
            }
        });

        document.addEventListener('dragend', (e) => {
            if (e.target.classList.contains('word-bank-item')) {
                e.target.classList.remove('dragging');
            }
        });

        document.addEventListener('dragover', (e) => {
            e.preventDefault();
            const draggingItem = document.querySelector('.word-bank-item.dragging');
            if (draggingItem) {
                const target = e.target.closest('.drop-target');
                const draggedType = e.dataTransfer.getData('text/item-type');
                if (target && target.dataset.columnType === draggedType) {
                    target.classList.add('drag-over');
                }
                
                // Autoscroll logic
                const y = e.clientY;
                const topZone = SCROLL_ZONE_SIZE;
                const bottomZone = window.innerHeight - SCROLL_ZONE_SIZE;
                
                if (y < topZone) {
                    window.scrollBy(0, -SCROLL_SPEED);
                } else if (y > bottomZone) {
                    window.scrollBy(0, SCROLL_SPEED);
                }
            }
        });

        document.addEventListener('dragleave', (e) => {
            e.preventDefault();
            const target = e.target.closest('.drop-target');
            if (target) {
                target.classList.remove('drag-over');
            }
        });

        document.addEventListener('drop', (e) => {
            e.preventDefault();
            const target = e.target.closest('.drop-target');
            const draggedText = e.dataTransfer.getData('text/plain');
            const draggedType = e.dataTransfer.getData('text/item-type');
            const draggedItem = document.querySelector(`.word-bank-item[data-original-text="${draggedText}"]`);

            if (target && target.dataset.column-type === draggedType) {
                target.classList.remove('drag-over');
                placeItemInTarget(draggedItem, target);
            } else if (draggedItem) {
                // Return item to bank if drop is invalid
                const originalBank = draggedItem.dataset.type === 'function' ? functionsBank : damageBank;
                originalBank.appendChild(draggedItem);
            }
        });

        // Click-to-Select listeners
        document.addEventListener('click', (e) => {
            const target = e.target.closest('.drop-target');
            if (target && target.children.length === 0) {
                activeDropTarget = target;
                showModal(target.dataset.columnType);
            }
        });

        const modalOverlay = document.getElementById('selection-modal-overlay');
        const modalCloseBtn = document.querySelector('.modal-close-btn');

        modalCloseBtn.addEventListener('click', hideModal);
        modalOverlay.addEventListener('click', (e) => {
            if (e.target.id === 'selection-modal-overlay') {
                hideModal();
            }
        });

        // Check and Reset buttons
        document.getElementById('check-btn').addEventListener('click', checkAnswers);
        document.getElementById('reset-btn').addEventListener('click', initializeWorksheet);
    }

    function placeItemInTarget(item, target) {
        // If there's an item in the target, move it back to its original bank
        if (target.children.length > 0) {
            const existingItem = target.firstElementChild;
            const originalBank = existingItem.dataset.type === 'function' ? functionsBank : damageBank;
            originalBank.appendChild(existingItem);
        }
        target.appendChild(item);
        item.style.backgroundColor = '#dbeafe';
    }

    function showModal(columnType) {
        const modalOptionsList = document.getElementById('modal-options-list');
        modalOptionsList.innerHTML = '';
        const sourceBank = columnType === 'function' ? functionsBank : damageBank;
        const availableItems = Array.from(sourceBank.children);

        availableItems.forEach(item => {
            const li = document.createElement('li');
            li.textContent = item.dataset.originalText;
            li.dataset.originalText = item.dataset.originalText;
            li.dataset.type = columnType;
            li.addEventListener('click', () => {
                const originalItem = document.querySelector(`.word-bank-item[data-original-text="${li.dataset.originalText}"]`);
                placeItemInTarget(originalItem, activeDropTarget);
                hideModal();
            });
            modalOptionsList.appendChild(li);
        });

        document.getElementById('selection-modal-overlay').style.display = 'flex';
    }

    function hideModal() {
        document.getElementById('selection-modal-overlay').style.display = 'none';
        activeDropTarget = null;
    }

    function checkAnswers() {
        let allCorrect = true;
        const feedbackEl = document.getElementById('feedback-message');
        const dropTargets = document.querySelectorAll('.drop-target');

        dropTargets.forEach(target => {
            const rowIndex = target.dataset.rowIndex;
            const colType = target.dataset.columnType;
            const correctText = worksheetData[rowIndex][colType];
            const placedItem = target.querySelector('.word-bank-item');

            if (placedItem && placedItem.dataset.originalText === correctText) {
                target.style.backgroundColor = '#d1fae5'; // Green for correct
                target.style.borderColor = '#34d399';
            } else {
                target.style.backgroundColor = '#fee2e2'; // Red for incorrect
                target.style.borderColor = '#f87171';
                allCorrect = false;
            }
        });

        if (allCorrect) {
            feedbackEl.textContent = "Great job! All answers are correct!";
            feedbackEl.style.color = '#10b981';
        } else {
            feedbackEl.textContent = "Some answers are incorrect. Keep trying!";
            feedbackEl.style.color = '#ef4444';
        }
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }
</script>
</body>
</html>
